<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vue Beginners.</title>
    <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

</head>
<body>

<div id="app">
    <header-component nama="Vuejs" gambar="https://vuejs.org/images/logo.png"></header-component>
    <nav>
        <router-link to ="/">Home</router-link>
        <router-link to ="/about">About</router-link>
        <router-link to ="/kelas">Kelas</router-link>
    </nav>

    <main>
        <router-view v-bind:items="kelas" v-on:submitkelas="submitkelas" v-on:hapuskelas="hapuskelas"></router-view>
    </main>
    <footer-component>
        <p>copyright 2025 - kelas.daffaReyhansyah</p>
    </footer-component>

</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.6.8"></script>
<script src="https://cdn.jsdelivr.net/npm/vue-router@3.0.2/dist/vue-router.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuid.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-database.js"></script>
<script src="firebase.js"></script>
<script src="component.js"></script>
<script src="router.js"></script>
<script>
  







    const vm = new Vue({
        router,
        components: {
            'home': Home
        },
        data: {
            kelas: []
        },

        created: function() {
            kelasRef.on('value', this.resultData, this.errorData)
            },

        methods: {
           resultData(snapshot) {
            this.kelas = []  // kosongkan dulu biar tidak menumpuk
            snapshot.forEach(childSnapshot => {
                let data = {
                id: childSnapshot.key,
                judul: childSnapshot.val().judul,
                deskripsi: childSnapshot.val().deskripsi,
                gambar: childSnapshot.val().gambar
                }
                this.kelas.push(data)
            })
            },

            errorData(error){
                console.log('Firebase error:', error)
            },
            hapuskelas: function (id) {
                database.ref('/kelas/' + id).remove()
                swal({
                    text: "Kelas berhasil dihapus!",
                    icon: "warning",
                })
            },
            submitkelas: function (data) {
                this.kelas = []
                kelasRef.push({
                    judul: data.judul,
                    deskripsi: data.deskripsi,
                    gambar: data.gambar
                })

                swal({
                    title: data.judul,
                    text: "Kelas berhasil ditambahkan!",
                    icon: "success",
                })
            }
        },
        computed: {}
    })

    vm.$mount('#app')
</script>
</body>
</html>